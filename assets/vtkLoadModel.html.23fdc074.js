import{_ as E,r as O,A as U,i as S,g as $,C as j,o as T,c as V,e as J,E as q,n as G,b as H,a as B,w as K}from"./app.28a7effe.js";const Q={class:"pdr-reader"},X={__name:"vtkLoadModel",setup(W){let u,r,i,g,h,R,C,I;const b=O(null),c=O(null),z=()=>q.service({lock:!0,text:"\u52A0\u8F7D\u4E2D",fullscreen:!0,background:"rgba(0, 0, 0, 0.7)"});let x;const y=()=>{x.close(),u=vtk.Rendering.Misc.vtkFullScreenRenderWindow,r=vtk.Rendering.Core.vtkActor,h=vtk.Rendering.Core.vtkMapper,vtk.IO.Misc.vtkPDBReader,R=vtk.IO.Misc.vtkMTLReader,C=vtk.IO.Misc.vtkOBJReader,i=vtk.Rendering.Core.vtkSphereMapper,I=vtk.Filters.General.vtkMoleculeToRepresentation,g=vtk.Rendering.Core.vtkStickMapper,G(()=>{if(!c.value){let F=function(M){const a=M.target,p=Number(a.dataset.index),e=l[p].actor,t=e.getVisibility();e.setVisibility(!t),t?a.classList.remove("visible"):a.classList.add("visible"),L()};const n=u.newInstance({rootContainer:b.value,background:[1,.7529411764705882,.796078431372549]}),o=n.getRenderer(),d=n.getRenderWindow(),s=C.newInstance({splitMode:"usemtl"}),v=R.newInstance(),l=[],_=I.newInstance(),f=i.newInstance(),m=g.newInstance(),D=r.newInstance(),N=r.newInstance(),P=o.resetCamera,L=d.render;v.setUrl("/note/model/diaona.mtl").then(()=>{s.setUrl("/note/model/diaona.obj").then(()=>{const M=s.getNumberOfOutputPorts();for(let e=0;e<M;e++){const t=s.getOutputData(e),A=t.get("name").name,w=h.newInstance(),k=r.newInstance();k.setMapper(w),w.setInputData(t),v.applyMaterialToActor(A,k),o.addActor(k),l.push({name:A,polydata:t,mapper:w,actor:k})}P(),L();const a=["<style>.visible { font-weight: bold; font-size:1.5em;color:pink} .click { cursor: pointer; min-width: 150px;}</style>"];l.forEach((e,t)=>{a.push(`<div class="click visible" data-index="${t}">${e.name}</div>`)}),n.addController(a.join(`
`));const p=document.querySelectorAll(".click");for(let e=0;e<p.length;e++){const t=p[e];t.onclick=F}})}),c.value={fullScreenRenderer:n,renderWindow:d,renderer:o,reader:s,filter:_,sphereMapper:f,stickMapper:m,sphereActor:D,stickActor:N}}})};return U(()=>{S&&(x=z(),window.vtk?y():$(()=>import("https://unpkg.com/vtk.js@25.1.0/vtk.js"),[]).then(()=>{y()}))}),j(()=>{if(c.value&&S){const{fullScreenRenderer:n,renderWindow:o,renderer:d,reader:s,filter:v,sphereMapper:l,stickMapper:_,sphereActor:f,stickActor:m}=c.value;d.delete(),v.delete(),l.delete(),_.delete(),f.delete(),m.delete(),s.delete(),o.delete(),window.removeEventListener("resize",n.resize),n.delete(),c.value=null}}),(n,o)=>(T(),V("div",Q,[J("div",{class:"vtk-container",ref_key:"vtkContainer",ref:b},null,512)]))}};var Y=E(X,[["__scopeId","data-v-4ff095d4"],["__file","vtkLoadModel.vue"]]);const Z={};function ee(W,u){const r=Y,i=H("ClientOnly");return T(),V("div",null,[B(i,null,{default:K(()=>[B(r)]),_:1})])}var ne=E(Z,[["render",ee],["__file","vtkLoadModel.html.vue"]]);export{ne as default};
//# sourceMappingURL=vtkLoadModel.html.23fdc074.js.map
