import{_ as h,r as w,A as P,i as g,g as x,C as y,o as M,c as A,e as O,E,n as B,b,a as C,w as D}from"./app.28a7effe.js";const W={class:"pdr-reader"},L={__name:"vtkPdrReader",setup(I){let v,a,p,u,k,f;const m=w(null),s=w(null),S=()=>E.service({lock:!0,text:"\u52A0\u8F7D\u4E2D",fullscreen:!0,background:"rgba(0, 0, 0, 0.7)"});let _;const R=()=>{_&&_.close(),v=vtk.Rendering.Misc.vtkFullScreenRenderWindow,a=vtk.Rendering.Core.vtkActor,p=vtk.IO.Misc.vtkPDBReader,u=vtk.Rendering.Core.vtkSphereMapper,f=vtk.Filters.General.vtkMoleculeToRepresentation,k=vtk.Rendering.Core.vtkStickMapper,B(()=>{if(!s.value){const e=v.newInstance({rootContainer:m.value}),t=e.getRenderer(),c=e.getRenderWindow(),l=p.newInstance(),n=f.newInstance(),o=u.newInstance(),r=k.newInstance(),d=a.newInstance(),i=a.newInstance();n.setInputConnection(l.getOutputPort()),n.setHideElements(["H"]),o.setInputConnection(n.getOutputPort(0)),o.setScaleArray(n.getSphereScaleArrayName()),d.setMapper(o),r.setInputConnection(n.getOutputPort(1)),r.setScaleArray("stickScales"),r.setOrientationArray("orientation"),i.setMapper(r),l.setUrl("/note/data/2LYZ.pdb").then(()=>{t.resetCamera(),c.render()}),t.addActor(d),t.addActor(i),t.resetCamera(),c.render(),s.value={fullScreenRenderer:e,renderWindow:c,renderer:t,reader:l,filter:n,sphereMapper:o,stickMapper:r,sphereActor:d,stickActor:i}}})};return P(()=>{g&&(window.vtk?R():(_=S(),x(()=>import("https://unpkg.com/vtk.js@25.1.0/vtk.js"),[]).then(()=>{R()})))}),y(()=>{if(s.value&&g){const{fullScreenRenderer:e,renderWindow:t,renderer:c,reader:l,filter:n,sphereMapper:o,stickMapper:r,sphereActor:d,stickActor:i}=s.value;c.delete(),n.delete(),o.delete(),r.delete(),d.delete(),i.delete(),l.delete(),t.delete(),window.removeEventListener("resize",e.resize),e.delete(),s.value=null}}),(e,t)=>(M(),A("div",W,[O("div",{class:"vtk-container",ref_key:"vtkContainer",ref:m},null,512)]))}};var T=h(L,[["__scopeId","data-v-3fc18f7b"],["__file","vtkPdrReader.vue"]]);const F={};function N(I,v){const a=T,p=b("ClientOnly");return M(),A("div",null,[C(p,null,{default:D(()=>[C(a)]),_:1})])}var z=h(F,[["render",N],["__file","vtkDemo.html.vue"]]);export{z as default};
//# sourceMappingURL=vtkDemo.html.b521ba70.js.map
