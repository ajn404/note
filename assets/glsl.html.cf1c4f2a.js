import{_ as s,o as a,c as t,H as e}from"./app.28a7effe.js";const p={};function o(c,n){return a(),t("div",null,n[0]||(n[0]=[e(`<h2 id="glsl-\u4E2D\u6587\u624B\u518C" tabindex="-1"><a class="header-anchor" href="#glsl-\u4E2D\u6587\u624B\u518C" aria-hidden="true">#</a> GLSL \u4E2D\u6587\u624B\u518C</h2><h3 id="\u57FA\u672C\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#\u57FA\u672C\u7C7B\u578B" aria-hidden="true">#</a> \u57FA\u672C\u7C7B\u578B:</h3><table><thead><tr><th>\u7C7B\u578B</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><strong>void</strong></td><td>\u7A7A\u7C7B\u578B,\u5373\u4E0D\u8FD4\u56DE\u4EFB\u4F55\u503C</td></tr><tr><td><strong>bool</strong></td><td>\u5E03\u5C14\u7C7B\u578B true,false</td></tr><tr><td><strong>int</strong></td><td>\u5E26\u7B26\u53F7\u7684\u6574\u6570 signed integer</td></tr><tr><td><strong>float</strong></td><td>\u5E26\u7B26\u53F7\u7684\u6D6E\u70B9\u6570 floating scalar</td></tr><tr><td><strong>vec2, vec3, vec4</strong></td><td>n\u7EF4\u6D6E\u70B9\u6570\u5411\u91CF n-component floating point vector</td></tr><tr><td><strong>bvec2, bvec3, bvec4</strong></td><td>n\u7EF4\u5E03\u5C14\u5411\u91CF Boolean vector</td></tr><tr><td><strong>ivec2, ivec3, ivec4</strong></td><td>n\u7EF4\u6574\u6570\u5411\u91CF signed integer vector</td></tr><tr><td><strong>mat2, mat3, mat4</strong></td><td>2x2, 3x3, 4x4 \u6D6E\u70B9\u6570\u77E9\u9635 float matrix</td></tr><tr><td><strong>sampler2D</strong></td><td>2D\u7EB9\u7406 a 2D texture</td></tr><tr><td><strong>samplerCube</strong></td><td>\u76D2\u7EB9\u7406 cube mapped texture</td></tr></tbody></table><h3 id="\u57FA\u672C\u7ED3\u6784\u548C\u6570\u7EC4" tabindex="-1"><a class="header-anchor" href="#\u57FA\u672C\u7ED3\u6784\u548C\u6570\u7EC4" aria-hidden="true">#</a> \u57FA\u672C\u7ED3\u6784\u548C\u6570\u7EC4:</h3><table><thead><tr><th>\u7C7B\u578B</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>\u7ED3\u6784</td><td>struct type-name{} \u7C7B\u4F3Cc\u8BED\u8A00\u4E2D\u7684 \u7ED3\u6784\u4F53</td></tr><tr><td>\u6570\u7EC4</td><td>float foo[3] glsl\u53EA\u652F\u63011\u7EF4\u6570\u7EC4,\u6570\u7EC4\u53EF\u4EE5\u662F\u7ED3\u6784\u4F53\u7684\u6210\u5458</td></tr></tbody></table><h3 id="\u5411\u91CF\u7684\u5206\u91CF\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#\u5411\u91CF\u7684\u5206\u91CF\u8BBF\u95EE" aria-hidden="true">#</a> \u5411\u91CF\u7684\u5206\u91CF\u8BBF\u95EE:</h3><p>glsl\u4E2D\u7684\u5411\u91CF(vec2,vec3,vec4)\u5F80\u5F80\u6709\u7279\u6B8A\u7684\u542B\u4E49,\u6BD4\u5982\u53EF\u80FD\u4EE3\u8868\u4E86\u4E00\u4E2A\u7A7A\u95F4\u5750\u6807(x,y,z,w),\u6216\u8005\u4EE3\u8868\u4E86\u4E00\u4E2A\u989C\u8272(r,g,b,a),\u518D\u6216\u8005\u4EE3\u8868\u4E00\u4E2A\u7EB9\u7406\u5750\u6807(s,t,p,q) \u6240\u4EE5glsl\u63D0\u4F9B\u4E86\u4E00\u4E9B\u66F4\u4EBA\u6027\u5316\u7684\u5206\u91CF\u8BBF\u95EE\u65B9\u5F0F.</p><p><code>vector.xyzw</code> \u5176\u4E2Dxyzw \u53EF\u4EE5\u4EFB\u610F\u7EC4\u5408</p><p><code>vector.rgba</code> \u5176\u4E2Drgba \u53EF\u4EE5\u4EFB\u610F\u7EC4\u5408</p><p><code>vector.stpq</code> \u5176\u4E2Drgba \u53EF\u4EE5\u4EFB\u610F\u7EC4\u5408</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>vec4 v<span class="token operator">=</span><span class="token function">vec4</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span><span class="token number">2.0</span><span class="token punctuation">,</span><span class="token number">3.0</span><span class="token punctuation">,</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> x <span class="token operator">=</span> v<span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token comment">//1.0</span>
<span class="token keyword">float</span> x1 <span class="token operator">=</span> v<span class="token punctuation">.</span>r<span class="token punctuation">;</span> <span class="token comment">//1.0</span>
<span class="token keyword">float</span> x2 <span class="token operator">=</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//1.0</span>

vec3 xyz <span class="token operator">=</span> v<span class="token punctuation">.</span>xyz<span class="token punctuation">;</span> <span class="token comment">//vec3(1.0,2.0,3.0)</span>
vec3 xyz1 <span class="token operator">=</span> <span class="token function">vec</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>v<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//vec3(1.0,2.0,3.0)</span>
vec3 rgb <span class="token operator">=</span> v<span class="token punctuation">.</span>rgb<span class="token punctuation">;</span> <span class="token comment">//vec3(1.0,2.0,3.0)</span>

vec2 xyzw <span class="token operator">=</span> v<span class="token punctuation">.</span>xyzw<span class="token punctuation">;</span> <span class="token comment">//vec4(1.0,2.0,3.0,1.0);</span>
vec2 rgba <span class="token operator">=</span> v<span class="token punctuation">.</span>rgba<span class="token punctuation">;</span> <span class="token comment">//vec4(1.0,2.0,3.0,1.0);</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u8FD0\u7B97\u7B26" tabindex="-1"><a class="header-anchor" href="#\u8FD0\u7B97\u7B26" aria-hidden="true">#</a> \u8FD0\u7B97\u7B26:</h3><table><thead><tr><th>\u4F18\u5148\u7EA7(\u8D8A\u5C0F\u8D8A\u9AD8)</th><th>\u8FD0\u7B97\u7B26</th><th>\u8BF4\u660E</th><th>\u7ED3\u5408\u6027</th></tr></thead><tbody><tr><td>1</td><td><strong>()</strong></td><td>\u805A\u7EC4:a*(b+c)</td><td>N/A</td></tr><tr><td>2</td><td><strong>[] () . ++ --</strong></td><td>\u6570\u7EC4\u4E0B\u6807__[]<strong>,\u65B9\u6CD5\u53C2\u6570__fun(arg1,arg2,arg3)</strong>,\u5C5E\u6027\u8BBF\u95EE__a.b__,\u81EA\u589E/\u51CF\u540E\u7F00__a++ a--__</td><td>L - R</td></tr><tr><td>3</td><td><strong>++ -- + - !</strong></td><td>\u81EA\u589E/\u51CF\u524D\u7F00__++a --a__,\u6B63\u8D1F\u53F7(\u4E00\u822C\u6B63\u53F7\u4E0D\u5199)<strong>a ,-a</strong>,\u53D6\u53CD__!false__</td><td>R - L</td></tr><tr><td>4</td><td><strong>* /</strong></td><td>\u4E58\u9664\u6570\u5B66\u8FD0\u7B97</td><td>L - R</td></tr><tr><td>5</td><td><strong>+ -</strong></td><td>\u52A0\u51CF\u6570\u5B66\u8FD0\u7B97</td><td>L - R</td></tr><tr><td>7</td><td><strong>&lt; &gt; &lt;= &gt;=</strong></td><td>\u5173\u7CFB\u8FD0\u7B97\u7B26</td><td>L - R</td></tr><tr><td>8</td><td><strong>== !=</strong></td><td>\u76F8\u7B49\u6027\u8FD0\u7B97\u7B26</td><td>L - R</td></tr><tr><td>12</td><td><strong>&amp;&amp;</strong></td><td>\u903B\u8F91\u4E0E</td><td>L - R</td></tr><tr><td>13</td><td><strong>^^</strong></td><td>\u903B\u8F91\u6392\u4ED6\u6216(\u7528\u5904\u57FA\u672C\u7B49\u4E8E!=)</td><td>L - R</td></tr><tr><td>14</td><td><strong>||</strong></td><td>\u903B\u8F91\u6216</td><td>L - R</td></tr><tr><td>15</td><td><strong>? :</strong></td><td>\u4E09\u76EE\u8FD0\u7B97\u7B26</td><td>L - R</td></tr><tr><td>16</td><td><strong>= += -= *= /=</strong></td><td>\u8D4B\u503C\u4E0E\u590D\u5408\u8D4B\u503C</td><td>L - R</td></tr><tr><td>17</td><td><strong>,</strong></td><td>\u987A\u5E8F\u5206\u914D\u8FD0\u7B97</td><td>L - R</td></tr></tbody></table><p><em>ps \u5DE6\u503C\u4E0E\u53F3\u503C:</em></p><p>\u5DE6\u503C:\u8868\u793A\u4E00\u4E2A\u50A8\u5B58\u4F4D\u7F6E,\u53EF\u4EE5\u662F\u53D8\u91CF,\u4E5F\u53EF\u4EE5\u662F\u8868\u8FBE\u5F0F,\u4F46\u8868\u8FBE\u5F0F\u6700\u540E\u7684\u7ED3\u679C\u5FC5\u987B\u662F\u4E00\u4E2A\u50A8\u5B58\u4F4D\u7F6E.<br> \u53F3\u503C:\u8868\u793A\u4E00\u4E2A\u503C, \u53EF\u4EE5\u662F\u4E00\u4E2A\u53D8\u91CF\u6216\u8005\u8868\u8FBE\u5F0F\u518D\u6216\u8005\u7EAF\u7CB9\u7684\u503C.<br> \u64CD\u4F5C\u7B26\u7684\u4F18\u5148\u7EA7\uFF1A\u51B3\u5B9A\u542B\u6709\u591A\u4E2A\u64CD\u4F5C\u7B26\u7684\u8868\u8FBE\u5F0F\u7684\u6C42\u503C\u987A\u5E8F\uFF0C\u6BCF\u4E2A\u64CD\u4F5C\u7684\u4F18\u5148\u7EA7\u4E0D\u540C.<br> \u64CD\u4F5C\u7B26\u7684\u7ED3\u5408\u6027\uFF1A\u51B3\u5B9A\u76F8\u540C\u4F18\u5148\u7EA7\u7684\u64CD\u4F5C\u7B26\u662F\u4ECE\u5DE6\u5230\u53F3\u8BA1\u7B97\uFF0C\u8FD8\u662F\u4ECE\u53F3\u5230\u5DE6\u8BA1\u7B97\u3002</p><h3 id="\u57FA\u7840\u7C7B\u578B\u95F4\u7684\u8FD0\u7B97" tabindex="-1"><a class="header-anchor" href="#\u57FA\u7840\u7C7B\u578B\u95F4\u7684\u8FD0\u7B97" aria-hidden="true">#</a> \u57FA\u7840\u7C7B\u578B\u95F4\u7684\u8FD0\u7B97:</h3><p>glsl\u4E2D,\u6CA1\u6709\u9690\u5F0F\u7C7B\u578B\u8F6C\u6362,\u539F\u5219\u4E0Aglsl\u8981\u6C42\u4EFB\u4F55\u8868\u8FBE\u5F0F\u5DE6\u53F3\u4E24\u4FA7(l-value),(r-value)\u7684\u7C7B\u578B\u5FC5\u987B\u4E00\u81F4 \u4E5F\u5C31\u662F\u8BF4\u4EE5\u4E0B\u8868\u8FBE\u5F0F\u90FD\u662F\u9519\u8BEF\u7684:</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> a <span class="token operator">=</span><span class="token number">2.0</span><span class="token punctuation">;</span> <span class="token comment">//\u9519\u8BEF,r-value\u4E3Afloat \u800C lvalue \u4E3Aint.</span>
<span class="token keyword">int</span> a <span class="token operator">=</span><span class="token number">1.0</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> a <span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> a <span class="token operator">=</span><span class="token number">2.0</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
vec3 a <span class="token operator">=</span> <span class="token function">vec3</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">3.0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u4E0B\u9762\u6765\u5206\u522B\u8BF4\u8BF4\u53EF\u80FD\u9047\u5230\u7684\u60C5\u51B5:</strong></p><p><strong>1.<code>float</code> \u4E0E <code>int</code>:</strong></p><p>float\u4E0Efloat , int\u4E0Eint\u4E4B\u95F4\u662F\u53EF\u4EE5\u76F4\u63A5\u8FD0\u7B97\u7684,\u4F46float\u4E0Eint\u4E0D\u884C.\u5B83\u4EEC\u9700\u8981\u8FDB\u884C\u4E00\u6B21\u663E\u793A\u8F6C\u6362.\u5373\u8981\u4E48\u628Afloat\u8F6C\u6210int: <strong>int(1.0)</strong> ,\u8981\u4E48\u628Aint\u8F6C\u6210float: <strong>float(1)</strong> ,\u4EE5\u4E0B\u8868\u8FBE\u5F0F\u90FD\u662F\u6B63\u786E\u7684:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>int a<span class="token operator">=</span><span class="token function">int</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
float a<span class="token operator">=</span> <span class="token function">float</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

int a<span class="token operator">=</span><span class="token function">int</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
float a<span class="token operator">=</span> <span class="token function">float</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">6.0</span><span class="token operator">+</span><span class="token number">2.3</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.<code>float</code> \u4E0E <code>vec(\u5411\u91CF)</code> <code>mat(\u77E9\u9635)</code>:</strong></p><p>vec,mat\u8FD9\u4E9B\u7C7B\u578B\u5176\u5B9E\u662F\u7531float\u590D\u5408\u800C\u6210\u7684,\u5F53\u5B83\u4EEC\u4E0Efloat\u8FD0\u7B97\u65F6,\u5176\u5B9E\u5C31\u662F\u5728\u6BCF\u4E00\u4E2A\u5206\u91CF\u4E0A\u5206\u522B\u4E0Efloat\u8FDB\u884C\u8FD0\u7B97,\u8FD9\u5C31\u662F\u6240\u8C13\u7684<code>\u9010\u5206\u91CF</code>\u8FD0\u7B97.glsl\u91CC \u5927\u90E8\u5206\u6D89\u53CAvec,mat\u7684\u8FD0\u7B97\u90FD\u662F<code>\u9010\u5206\u91CF</code>\u8FD0\u7B97,\u4F46\u4E5F\u5E76\u4E0D\u5168\u662F. \u4E0B\u6587\u4E2D\u5C31\u4F1A\u8BB2\u5230\u7279\u4F8B.</p><p><code>\u9010\u5206\u91CF</code>\u8FD0\u7B97\u662F\u7EBF\u6027\u7684,\u8FD9\u5C31\u662F\u8BF4 vec \u4E0E float \u7684\u8FD0\u7B97\u7ED3\u679C\u662F\u8FD8\u662F vec.</p><p>int \u4E0E vec,mat\u4E4B\u95F4\u662F\u4E0D\u53EF\u8FD0\u7B97\u7684, \u56E0\u4E3Avec\u548Cmat\u4E2D\u7684\u6BCF\u4E00\u4E2A\u5206\u91CF\u90FD\u662F float \u7C7B\u578B\u7684. \u65E0\u6CD5\u4E0Eint\u8FDB\u884C\u9010\u5206\u91CF\u8BA1\u7B97.</p><p>\u4E0B\u9762\u679A\u4E3E\u4E86\u51E0\u79CD float \u4E0E vec,mat \u8FD0\u7B97\u7684\u60C5\u51B5</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>vec3 a <span class="token operator">=</span> <span class="token function">vec3</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">3.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mat3 m <span class="token operator">=</span> <span class="token function">mat3</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> s <span class="token operator">=</span> <span class="token number">10.0</span><span class="token punctuation">;</span>
vec3 b <span class="token operator">=</span> s <span class="token operator">*</span> a<span class="token punctuation">;</span> <span class="token comment">// vec3(10.0, 20.0, 30.0)</span>
vec3 c <span class="token operator">=</span> a <span class="token operator">*</span> s<span class="token punctuation">;</span> <span class="token comment">// vec3(10.0, 20.0, 30.0)</span>
mat3 m2 <span class="token operator">=</span> s <span class="token operator">*</span> m<span class="token punctuation">;</span> <span class="token comment">// = mat3(10.0)</span>
mat3 m3 <span class="token operator">=</span> m <span class="token operator">*</span> s<span class="token punctuation">;</span> <span class="token comment">// = mat3(10.0)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3. <code>vec(\u5411\u91CF)</code> \u4E0E <code>vec(\u5411\u91CF)</code>:</strong></p><p>\u4E24\u5411\u91CF\u95F4\u7684\u8FD0\u7B97\u9996\u5148\u8981\u4FDD\u8BC1\u64CD\u4F5C\u6570\u7684\u9636\u6570\u90FD\u76F8\u540C.\u5426\u5219\u4E0D\u80FD\u8BA1\u7B97.\u4F8B\u5982: vec3*vec2 vec4+vec3 \u7B49\u7B49\u90FD\u662F\u4E0D\u884C\u7684.</p><p>\u5B83\u4EEC\u7684\u8BA1\u7B97\u65B9\u5F0F\u662F\u4E24\u64CD\u4F5C\u6570\u5728\u540C\u4F4D\u7F6E\u4E0A\u7684\u5206\u91CF\u5206\u522B\u8FDB\u884C\u8FD0\u7B97,\u5176\u672C\u8D28\u8FD8\u662F\u9010\u5206\u91CF\u8FDB\u884C\u7684,\u8FD9\u548C\u4E0A\u9762\u6240\u8BF4\u7684float\u7C7B\u578B\u7684 \u9010\u5206\u91CF\u8FD0\u7B97\u53EF\u80FD\u6709\u4E00\u70B9\u70B9\u5DEE\u5F02,\u76F8\u540C\u7684\u662F vec \u4E0E vec \u8FD0\u7B97\u7ED3\u679C\u8FD8\u662F vec, \u4E14\u9636\u6570\u4E0D\u53D8.</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>vec3 a <span class="token operator">=</span> <span class="token function">vec3</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">3.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vec3 b <span class="token operator">=</span> <span class="token function">vec3</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vec3 c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span> <span class="token comment">// = vec3(1.1, 2.2, 3.3)</span>
vec3 d <span class="token operator">=</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span> <span class="token comment">// = vec3(0.1, 0.4, 0.9)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://wshxbqq-wshxbqq.stor.sinaapp.com/2016-08-08_16-15-35_329___2.png" alt=""></p><p><strong>3. <code>vec(\u5411\u91CF)</code> \u4E0E <code>mat(\u77E9\u9635)</code>:</strong></p><p>\u8981\u4FDD\u8BC1\u64CD\u4F5C\u6570\u7684\u9636\u6570\u76F8\u540C,\u4E14vec\u4E0Emat\u95F4\u53EA\u5B58\u5728\u4E58\u6CD5\u8FD0\u7B97.</p><p>\u5B83\u4EEC\u7684\u8BA1\u7B97\u65B9\u5F0F\u548C\u7EBF\u6027\u4EE3\u6570\u4E2D\u7684\u77E9\u9635\u4E58\u6CD5\u76F8\u540C,\u4E0D\u662F\u9010\u5206\u91CF\u8FD0\u7B97.</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>vec2 v <span class="token operator">=</span> <span class="token function">vec2</span><span class="token punctuation">(</span><span class="token number">10.</span><span class="token punctuation">,</span> <span class="token number">20.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mat2 m <span class="token operator">=</span> <span class="token function">mat2</span><span class="token punctuation">(</span><span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">2.</span><span class="token punctuation">,</span>  <span class="token number">3.</span><span class="token punctuation">,</span> <span class="token number">4.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vec2 w <span class="token operator">=</span> m <span class="token operator">*</span> v<span class="token punctuation">;</span> <span class="token comment">// = vec2(1. * 10. + 3. * 20., 2. * 10. + 4. * 20.)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

vec2 v <span class="token operator">=</span> <span class="token function">vec2</span><span class="token punctuation">(</span><span class="token number">10.</span><span class="token punctuation">,</span> <span class="token number">20.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mat2 m <span class="token operator">=</span> <span class="token function">mat2</span><span class="token punctuation">(</span><span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">2.</span><span class="token punctuation">,</span>  <span class="token number">3.</span><span class="token punctuation">,</span> <span class="token number">4.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vec2 w <span class="token operator">=</span> v <span class="token operator">*</span> m<span class="token punctuation">;</span> <span class="token comment">// = vec2(1. * 10. + 2. * 20., 3. * 10. + 4. * 20.)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5411\u91CF\u4E0E\u77E9\u9635\u7684\u4E58\u6CD5\u89C4\u5219\u5982\u4E0B:</p><p><img src="http://wshxbqq-wshxbqq.stor.sinaapp.com/2016-08-08_16-15-36_966___3.png" alt=""></p><p><img src="http://wshxbqq-wshxbqq.stor.sinaapp.com/2016-08-08_16-15-36_284___4.png" alt=""></p><p><strong>4. <code>mat(\u77E9\u9635)</code> \u4E0E <code>mat(\u77E9\u9635)</code>:</strong></p><p>\u8981\u4FDD\u8BC1\u64CD\u4F5C\u6570\u7684\u9636\u6570\u76F8\u540C.</p><p>\u5728mat\u4E0Emat\u7684\u8FD0\u7B97\u4E2D, \u9664\u4E86\u4E58\u6CD5\u662F\u7EBF\u6027\u4EE3\u6570\u4E2D\u7684\u77E9\u9635\u4E58\u6CD5\u5916.\u5176\u4F59\u7684\u8FD0\u7B97\u4EFB\u4E3A\u9010\u5206\u91CF\u8FD0\u7B97.\u7B80\u5355\u8BF4\u5C31\u662F\u53EA\u6709\u4E58\u6CD5\u662F\u7279\u6B8A\u7684,\u5176\u4F59\u90FD\u548Cvec\u4E0Evec\u8FD0\u7B97\u7C7B\u4F3C.</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>mat2 a <span class="token operator">=</span> <span class="token function">mat2</span><span class="token punctuation">(</span><span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">2.</span><span class="token punctuation">,</span>  <span class="token number">3.</span><span class="token punctuation">,</span> <span class="token number">4.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mat2 b <span class="token operator">=</span> <span class="token function">mat2</span><span class="token punctuation">(</span><span class="token number">10.</span><span class="token punctuation">,</span> <span class="token number">20.</span><span class="token punctuation">,</span>  <span class="token number">30.</span><span class="token punctuation">,</span> <span class="token number">40.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mat2 c <span class="token operator">=</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span> <span class="token comment">//mat2(1.*10.+3.*20.,2.*10.+4.*20.,1.* 30.+3.*40.,2.* 30.+4.*40.);</span>

mat2 d <span class="token operator">=</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span><span class="token comment">//mat2(1.+10.,2.+20.,3.+30.,4.+40);</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u77E9\u9635\u4E58\u6CD5\u89C4\u5219\u5982\u4E0B:</p><p><img src="http://wshxbqq-wshxbqq.stor.sinaapp.com/2016-08-08_16-15-36_985___5.png" alt=""></p><h3 id="\u53D8\u91CF\u9650\u5B9A\u7B26" tabindex="-1"><a class="header-anchor" href="#\u53D8\u91CF\u9650\u5B9A\u7B26" aria-hidden="true">#</a> \u53D8\u91CF\u9650\u5B9A\u7B26:</h3><table><thead><tr><th>\u4FEE\u9970\u7B26</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><strong>none</strong></td><td>(\u9ED8\u8BA4\u7684\u53EF\u7701\u7565)\u672C\u5730\u53D8\u91CF,\u53EF\u8BFB\u53EF\u5199,\u51FD\u6570\u7684\u8F93\u5165\u53C2\u6570\u65E2\u662F\u8FD9\u79CD\u7C7B\u578B</td></tr><tr><td><strong>const</strong></td><td>\u58F0\u660E\u53D8\u91CF\u6216\u51FD\u6570\u7684\u53C2\u6570\u4E3A\u53EA\u8BFB\u7C7B\u578B</td></tr><tr><td><strong>attribute</strong></td><td>\u53EA\u80FD\u5B58\u5728\u4E8Evertex shader\u4E2D,\u4E00\u822C\u7528\u4E8E\u4FDD\u5B58\u9876\u70B9\u6216\u6CD5\u7EBF\u6570\u636E,\u5B83\u53EF\u4EE5\u5728\u6570\u636E\u7F13\u51B2\u533A\u4E2D\u8BFB\u53D6\u6570\u636E</td></tr><tr><td><strong>uniform</strong></td><td>\u5728\u8FD0\u884C\u65F6shader\u65E0\u6CD5\u6539\u53D8uniform\u53D8\u91CF, \u4E00\u822C\u7528\u6765\u653E\u7F6E\u7A0B\u5E8F\u4F20\u9012\u7ED9shader\u7684\u53D8\u6362\u77E9\u9635\uFF0C\u6750\u8D28\uFF0C\u5149\u7167\u53C2\u6570\u7B49\u7B49.</td></tr><tr><td><strong>varying</strong></td><td>\u4E3B\u8981\u8D1F\u8D23\u5728vertex \u548C fragment \u4E4B\u95F4\u4F20\u9012\u53D8\u91CF</td></tr></tbody></table><p><strong>const</strong>:</p><p>\u548CC\u8BED\u8A00\u7C7B\u4F3C,\u88ABconst\u9650\u5B9A\u7B26\u4FEE\u9970\u7684\u53D8\u91CF\u521D\u59CB\u5316\u540E\u4E0D\u53EF\u53D8,\u9664\u4E86\u5C40\u90E8\u53D8\u91CF,\u51FD\u6570\u53C2\u6570\u4E5F\u53EF\u4EE5\u4F7F\u7528const\u4FEE\u9970\u7B26.\u4F46\u8981\u6CE8\u610F\u7684\u662F\u7ED3\u6784\u53D8\u91CF\u53EF\u4EE5\u7528const\u4FEE\u9970, \u4F46\u7ED3\u6784\u4E2D\u7684\u5B57\u6BB5\u4E0D\u884C.</p><p>const\u53D8\u91CF\u5FC5\u987B\u5728\u58F0\u660E\u65F6\u5C31\u521D\u59CB\u5316 <code>const vec3 v3 = vec3(0.,0.,0.)</code></p><p>\u5C40\u90E8\u53D8\u91CF\u53EA\u80FD\u4F7F\u7528const\u9650\u5B9A\u7B26.</p><p>\u51FD\u6570\u53C2\u6570\u53EA\u80FD\u4F7F\u7528const\u9650\u5B9A\u7B26.</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">struct</span> <span class="token class-name">light</span> <span class="token punctuation">{</span>
        vec4 color<span class="token punctuation">;</span>
        vec3 pos<span class="token punctuation">;</span>
        <span class="token comment">//const vec3 pos1; //\u7ED3\u6784\u4E2D\u7684\u5B57\u6BB5\u4E0D\u53EF\u7528const\u4FEE\u9970\u4F1A\u62A5\u9519.</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> light lgt <span class="token operator">=</span> <span class="token function">light</span><span class="token punctuation">(</span><span class="token function">vec4</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">vec3</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u7ED3\u6784\u53D8\u91CF\u53EF\u4EE5\u7528const\u4FEE\u9970</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>attribute</strong>:</p><p>attribute\u53D8\u91CF\u662F<code>\u5168\u5C40</code>\u4E14<code>\u53EA\u8BFB</code>\u7684,\u5B83\u53EA\u80FD\u5728vertex shader\u4E2D\u4F7F\u7528,\u53EA\u80FD\u4E0E\u6D6E\u70B9\u6570,\u5411\u91CF\u6216\u77E9\u9635\u53D8\u91CF\u7EC4\u5408, \u4E00\u822Cattribute\u53D8\u91CF\u7528\u6765\u653E\u7F6E\u7A0B\u5E8F\u4F20\u9012\u6765\u7684\u6A21\u578B\u9876\u70B9,\u6CD5\u7EBF,\u989C\u8272,\u7EB9\u7406\u7B49\u6570\u636E\u5B83\u53EF\u4EE5\u8BBF\u95EE\u6570\u636E\u7F13\u51B2\u533A (\u8FD8\u8BB0\u5F97__gl.vertexAttribPointer__\u8FD9\u4E2A\u51FD\u6570\u5427)</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>attribute vec4 a_Position<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>uniform</strong>:</p><p>uniform\u53D8\u91CF\u662F<code>\u5168\u5C40</code>\u4E14<code>\u53EA\u8BFB</code>\u7684,\u5728\u6574\u4E2Ashader\u6267\u884C\u5B8C\u6BD5\u524D\u5176\u503C\u4E0D\u4F1A\u6539\u53D8,\u4ED6\u53EF\u4EE5\u548C\u4EFB\u610F\u57FA\u672C\u7C7B\u578B\u53D8\u91CF\u7EC4\u5408, \u4E00\u822C\u6211\u4EEC\u4F7F\u7528uniform\u53D8\u91CF\u6765\u653E\u7F6E\u5916\u90E8\u7A0B\u5E8F\u4F20\u9012\u6765\u7684\u73AF\u5883\u6570\u636E(\u5982\u70B9\u5149\u6E90\u4F4D\u7F6E,\u6A21\u578B\u7684\u53D8\u6362\u77E9\u9635\u7B49\u7B49) \u8FD9\u4E9B\u6570\u636E\u5728\u8FD0\u884C\u4E2D\u663E\u7136\u662F\u4E0D\u9700\u8981\u88AB\u6539\u53D8\u7684.</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>uniform vec4 lightPosition<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>varying</strong>:</p><p>varying\u7C7B\u578B\u53D8\u91CF\u662F vertex shader \u4E0E fragment shader \u4E4B\u95F4\u7684\u4FE1\u4F7F,\u4E00\u822C\u6211\u4EEC\u5728 vertex shader \u4E2D\u4FEE\u6539\u5B83\u7136\u540E\u5728fragment shader\u4F7F\u7528\u5B83,\u4F46\u4E0D\u80FD\u5728 fragment shader\u4E2D\u4FEE\u6539\u5B83.</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//\u9876\u70B9\u7740\u8272\u5668</span>
varying vec4 v_Color<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    v_Color <span class="token operator">=</span> <span class="token function">vec4</span><span class="token punctuation">(</span><span class="token number">1.</span><span class="token punctuation">,</span><span class="token number">1.</span><span class="token punctuation">,</span><span class="token number">1.</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7247\u5143\u7740\u8272\u5668</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
varying vec4 v_Color<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  gl_FragColor <span class="token operator">=</span> v_Color<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8981\u6CE8\u610F\u5168\u5C40\u53D8\u91CF\u9650\u5236\u7B26\u53EA\u80FD\u4E3A const\u3001attribute\u3001uniform\u548Cvarying\u4E2D\u7684\u4E00\u4E2A.\u4E0D\u53EF\u590D\u5408.</p><h3 id="\u51FD\u6570\u53C2\u6570\u9650\u5B9A\u7B26" tabindex="-1"><a class="header-anchor" href="#\u51FD\u6570\u53C2\u6570\u9650\u5B9A\u7B26" aria-hidden="true">#</a> \u51FD\u6570\u53C2\u6570\u9650\u5B9A\u7B26:</h3><p>\u51FD\u6570\u7684\u53C2\u6570\u9ED8\u8BA4\u662F\u4EE5\u62F7\u8D1D\u7684\u5F62\u5F0F\u4F20\u9012\u7684,\u4E5F\u5C31\u662F\u503C\u4F20\u9012,\u4EFB\u4F55\u4F20\u9012\u7ED9\u51FD\u6570\u53C2\u6570\u7684\u53D8\u91CF,\u5176\u503C\u90FD\u4F1A\u88AB\u590D\u5236\u4E00\u4EFD,\u7136\u540E\u518D\u4EA4\u7ED9\u51FD\u6570\u5185\u90E8\u8FDB\u884C\u5904\u7406. \u6211\u4EEC\u53EF\u4EE5\u4E3A\u53C2\u6570\u6DFB\u52A0\u9650\u5B9A\u7B26\u6765\u8FBE\u5230\u4F20\u9012\u5F15\u7528\u7684\u76EE\u7684,glsl\u4E2D\u63D0\u4F9B\u7684\u53C2\u6570\u9650\u5B9A\u7B26\u5982\u4E0B:</p><table><thead><tr><th>\u9650\u5B9A\u7B26</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>&lt; none: default &gt;</td><td>\u9ED8\u8BA4\u4F7F\u7528 in \u9650\u5B9A\u7B26</td></tr><tr><td>in</td><td>\u590D\u5236\u5230\u51FD\u6570\u4E2D\u5728\u51FD\u6570\u4E2D\u53EF\u8BFB\u5199</td></tr><tr><td>out</td><td>\u8FD4\u56DE\u65F6\u4ECE\u51FD\u6570\u4E2D\u590D\u5236\u51FA\u6765</td></tr><tr><td>inout</td><td>\u590D\u5236\u5230\u51FD\u6570\u4E2D\u5E76\u5728\u8FD4\u56DE\u65F6\u590D\u5236\u51FA\u6765</td></tr></tbody></table><p><code>in</code> \u662F\u51FD\u6570\u53C2\u6570\u7684\u9ED8\u8BA4\u9650\u5B9A\u7B26,\u6700\u7EC8\u771F\u6B63\u4F20\u5165\u51FD\u6570\u5F62\u53C2\u7684\u5176\u5B9E\u662F\u5B9E\u53C2\u7684\u4E00\u4EFD\u62F7\u8D1D.\u5728\u51FD\u6570\u4E2D,\u4FEE\u6539in\u4FEE\u9970\u7684\u5F62\u53C2\u4E0D\u4F1A\u5F71\u54CD\u5230\u5B9E\u53C2\u53D8\u91CF\u672C\u8EAB.</p><p><code>out</code> \u5B83\u7684\u4F5C\u7528\u662F\u5411\u51FD\u6570\u5916\u90E8\u4F20\u9012\u65B0\u503C,out\u6A21\u5F0F\u4E0B\u4F20\u9012\u8FDB\u6765\u7684\u53C2\u6570\u662Fwrite-only\u7684(\u53EF\u5199\u4E0D\u53EF\u8BFB).\u5C31\u50CF\u662F\u4E00\u4E2A&quot;\u5751\u4F4D&quot;,\u5751\u4F4D\u4E2D\u7684\u503C\u9700\u8981\u51FD\u6570\u7ED9\u4ED6\u8D4B\u4E88. \u5728\u51FD\u6570\u4E2D,\u4FEE\u6539out\u4FEE\u9970\u7684\u5F62\u53C2\u4F1A\u5F71\u54CD\u5230\u5B9E\u53C2\u672C\u8EAB.</p><p><code>inout</code> inout\u4E0B,\u5F62\u53C2\u53EF\u4EE5\u88AB\u7406\u89E3\u4E3A\u662F\u4E00\u4E2A\u5E26\u503C\u7684&quot;\u5751\u4F4D&quot;,\u53CA\u53EF\u8BFB\u4E5F\u53EF\u5199,\u5728\u51FD\u6570\u4E2D,\u4FEE\u6539inout\u4FEE\u9970\u7684\u5F62\u53C2\u4F1A\u5F71\u54CD\u5230\u5B9E\u53C2\u672C\u8EAB.</p><h3 id="glsl\u7684\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#glsl\u7684\u51FD\u6570" aria-hidden="true">#</a> glsl\u7684\u51FD\u6570:</h3><p>glsl\u5141\u8BB8\u5728\u7A0B\u5E8F\u7684\u6700\u5916\u90E8\u58F0\u660E\u51FD\u6570.\u51FD\u6570\u4E0D\u80FD\u5D4C\u5957,\u4E0D\u80FD\u9012\u5F52\u8C03\u7528,\u4E14\u5FC5\u987B\u58F0\u660E\u8FD4\u56DE\u503C\u7C7B\u578B(\u65E0\u8FD4\u56DE\u503C\u65F6\u58F0\u660E\u4E3Avoid) \u5728\u5176\u4ED6\u65B9\u9762glsl\u51FD\u6570\u4E0Ec\u51FD\u6570\u975E\u5E38\u7C7B\u4F3C.</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>vec4 <span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
    vec4 v4 <span class="token operator">=</span> <span class="token function">vec4</span><span class="token punctuation">(</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">1.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> v4<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">doubleSize</span><span class="token punctuation">(</span>inout <span class="token keyword">float</span> size<span class="token punctuation">)</span><span class="token punctuation">{</span>
    size<span class="token operator">=</span> size<span class="token operator">*</span><span class="token number">2.0</span>  <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">float</span> psize<span class="token operator">=</span> <span class="token number">10.0</span><span class="token punctuation">;</span>
    <span class="token function">doubleSize</span><span class="token punctuation">(</span>psize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    gl_Position <span class="token operator">=</span> <span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    gl_PointSize <span class="token operator">=</span> psize<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6784\u9020\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u6784\u9020\u51FD\u6570" aria-hidden="true">#</a> \u6784\u9020\u51FD\u6570:</h3><p>glsl\u4E2D\u53D8\u91CF\u53EF\u4EE5\u5728\u58F0\u660E\u7684\u65F6\u5019\u521D\u59CB\u5316,<code>float pSize = 10.0</code> \u4E5F\u53EF\u4EE5\u5148\u58F0\u660E\u7136\u540E\u7B49\u9700\u8981\u7684\u65F6\u5019\u5728\u8FDB\u884C\u8D4B\u503C.</p><p>\u805A\u5408\u7C7B\u578B\u5BF9\u8C61\u5982(\u5411\u91CF,\u77E9\u9635,\u6570\u7EC4,\u7ED3\u6784) \u9700\u8981\u4F7F\u7528\u5176\u6784\u9020\u51FD\u6570\u6765\u8FDB\u884C\u521D\u59CB\u5316. <code>vec4 color = vec4(0.0, 1.0, 0.0, 1.0);</code></p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//\u4E00\u822C\u7C7B\u578B</span>
<span class="token keyword">float</span> pSize <span class="token operator">=</span> <span class="token number">10.0</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> pSize1<span class="token punctuation">;</span>
pSize1<span class="token operator">=</span><span class="token number">10.0</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">//\u590D\u5408\u7C7B\u578B</span>
vec4 color <span class="token operator">=</span> <span class="token function">vec4</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vec4 color1<span class="token punctuation">;</span>
color1 <span class="token operator">=</span><span class="token function">vec4</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">//\u7ED3\u6784</span>
<span class="token keyword">struct</span> <span class="token class-name">light</span> <span class="token punctuation">{</span>
    <span class="token keyword">float</span> intensity<span class="token punctuation">;</span>
    vec3 position<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
light lightVar <span class="token operator">=</span> <span class="token function">light</span><span class="token punctuation">(</span><span class="token number">3.0</span><span class="token punctuation">,</span> <span class="token function">vec3</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">3.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//\u6570\u7EC4</span>
<span class="token keyword">const</span> <span class="token keyword">float</span> c<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">float</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">5.0</span><span class="token punctuation">,</span> <span class="token number">7.2</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7C7B\u578B\u8F6C\u6362" tabindex="-1"><a class="header-anchor" href="#\u7C7B\u578B\u8F6C\u6362" aria-hidden="true">#</a> \u7C7B\u578B\u8F6C\u6362:</h3><p>glsl\u53EF\u4EE5\u4F7F\u7528\u6784\u9020\u51FD\u6570\u8FDB\u884C\u663E\u5F0F\u7C7B\u578B\u8F6C\u6362,\u5404\u503C\u5982\u4E0B:</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">bool</span> t<span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> f <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true\u8F6C\u6362\u4E3A1\u62161.0</span>
<span class="token keyword">int</span> a1 <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false\u8F6C\u6362\u4E3A0\u62160.0</span>

<span class="token keyword">float</span> b <span class="token operator">=</span> <span class="token keyword">float</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> b1 <span class="token operator">=</span> <span class="token keyword">float</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">bool</span> c <span class="token operator">=</span> <span class="token keyword">bool</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0\u62160.0\u8F6C\u6362\u4E3Afalse</span>
<span class="token keyword">bool</span> c1 <span class="token operator">=</span> <span class="token keyword">bool</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u975E0\u8F6C\u6362\u4E3Atrue</span>

<span class="token keyword">bool</span> d <span class="token operator">=</span> <span class="token keyword">bool</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> d1 <span class="token operator">=</span> <span class="token keyword">bool</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7CBE\u5EA6\u9650\u5B9A" tabindex="-1"><a class="header-anchor" href="#\u7CBE\u5EA6\u9650\u5B9A" aria-hidden="true">#</a> \u7CBE\u5EA6\u9650\u5B9A:</h3><p>glsl\u5728\u8FDB\u884C\u5149\u6805\u5316\u7740\u8272\u7684\u65F6\u5019,\u4F1A\u4EA7\u751F\u5927\u91CF\u7684\u6D6E\u70B9\u6570\u8FD0\u7B97,\u8FD9\u4E9B\u8FD0\u7B97\u53EF\u80FD\u662F\u5F53\u524D\u8BBE\u5907\u6240\u4E0D\u80FD\u627F\u53D7\u7684,\u6240\u4EE5glsl\u63D0\u4F9B\u4E863\u79CD\u6D6E\u70B9\u6570\u7CBE\u5EA6,\u6211\u4EEC\u53EF\u4EE5\u6839\u636E\u4E0D\u540C\u7684\u8BBE\u5907\u6765\u4F7F\u7528\u5408\u9002\u7684\u7CBE\u5EA6.</p><p>\u5728\u53D8\u91CF\u524D\u9762\u52A0\u4E0A <code>highp</code> <code>mediump</code> <code>lowp</code> \u5373\u53EF\u5B8C\u6210\u5BF9\u8BE5\u53D8\u91CF\u7684\u7CBE\u5EA6\u58F0\u660E.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>lowp float color;
varying mediump vec2 Coord;
lowp ivec2 foo(lowp mat3);
highp mat4 m;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u4E00\u822C\u5728\u7247\u5143\u7740\u8272\u5668(fragment shader)\u6700\u5F00\u59CB\u7684\u5730\u65B9\u52A0\u4E0A <code>precision mediump float;</code> \u4FBF\u8BBE\u5B9A\u4E86\u9ED8\u8BA4\u7684\u7CBE\u5EA6.\u8FD9\u6837\u6240\u6709\u6CA1\u6709\u663E\u5F0F\u8868\u660E\u7CBE\u5EA6\u7684\u53D8\u91CF \u90FD\u4F1A\u6309\u7167\u8BBE\u5B9A\u597D\u7684\u9ED8\u8BA4\u7CBE\u5EA6\u6765\u5904\u7406.</p><p><strong>\u5982\u4F55\u786E\u5B9A\u7CBE\u5EA6:</strong></p><p>\u53D8\u91CF\u7684\u7CBE\u5EA6\u9996\u5148\u662F\u7531\u7CBE\u5EA6\u9650\u5B9A\u7B26\u51B3\u5B9A\u7684,\u5982\u679C\u6CA1\u6709\u7CBE\u5EA6\u9650\u5B9A\u7B26,\u5219\u8981\u5BFB\u627E\u5176\u53F3\u4FA7\u8868\u8FBE\u5F0F\u4E2D,\u5DF2\u7ECF\u786E\u5B9A\u7CBE\u5EA6\u7684\u53D8\u91CF,\u4E00\u65E6\u627E\u5230,\u90A3\u4E48\u6574\u4E2A\u8868\u8FBE\u5F0F\u90FD\u5C06\u5728\u8BE5\u7CBE\u5EA6\u4E0B\u8FD0\u884C.\u5982\u679C\u627E\u5230\u591A\u4E2A, \u5219\u9009\u62E9\u7CBE\u5EA6\u8F83\u9AD8\u7684\u90A3\u79CD,\u5982\u679C\u4E00\u4E2A\u90FD\u627E\u4E0D\u5230,\u5219\u4F7F\u7528\u9ED8\u8BA4\u6216\u66F4\u5927\u7684\u7CBE\u5EA6\u7C7B\u578B.</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>uniform highp <span class="token keyword">float</span> h1<span class="token punctuation">;</span>
highp <span class="token keyword">float</span> h2 <span class="token operator">=</span> <span class="token number">2.3</span> <span class="token operator">*</span> <span class="token number">4.7</span><span class="token punctuation">;</span> <span class="token comment">//\u8FD0\u7B97\u8FC7\u7A0B\u548C\u7ED3\u679C\u90FD \u662F\u9AD8\u7CBE\u5EA6</span>
mediump <span class="token keyword">float</span> m<span class="token punctuation">;</span>
m <span class="token operator">=</span> <span class="token number">3.7</span> <span class="token operator">*</span> h1 <span class="token operator">*</span> h2<span class="token punctuation">;</span> <span class="token comment">//\u8FD0\u7B97\u8FC7\u7A0B \u662F\u9AD8\u7CBE\u5EA6</span>
h2 <span class="token operator">=</span> m <span class="token operator">*</span> h1<span class="token punctuation">;</span> <span class="token comment">//\u8FD0\u7B97\u8FC7\u7A0B \u662F\u9AD8\u7CBE\u5EA6</span>
m <span class="token operator">=</span> h2 \u2013 h1<span class="token punctuation">;</span> <span class="token comment">//\u8FD0\u7B97\u8FC7\u7A0B \u662F\u9AD8\u7CBE\u5EA6</span>
h2 <span class="token operator">=</span> m <span class="token operator">+</span> m<span class="token punctuation">;</span> <span class="token comment">//\u8FD0\u7B97\u8FC7\u7A0B\u548C\u7ED3\u679C\u90FD \u662F\u4E2D\u7B49\u7CBE\u5EA6</span>
<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>highp <span class="token keyword">float</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u5F62\u53C2 p \u662F\u9AD8\u7CBE\u5EA6</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">3.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u4F20\u5165\u7684 3.3\u662F\u9AD8\u7CBE\u5EA6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>invariant\u5173\u952E\u5B57:</strong></p><p>\u7531\u4E8Eshader\u5728\u7F16\u8BD1\u65F6\u4F1A\u8FDB\u884C\u4E00\u4E9B\u5185\u90E8\u4F18\u5316,\u53EF\u80FD\u4F1A\u5BFC\u81F4\u540C\u6837\u7684\u8FD0\u7B97\u5728\u4E0D\u540Cshader\u91CC\u7ED3\u679C\u4E0D\u4E00\u5B9A\u7CBE\u786E\u76F8\u7B49.\u8FD9\u4F1A\u5F15\u8D77\u4E00\u4E9B\u95EE\u9898,\u5C24\u5176\u662Fvertx shader\u5411fragmeng shader\u4F20\u503C\u7684\u65F6\u5019. \u6240\u4EE5\u6211\u4EEC\u9700\u8981\u4F7F\u7528<code>invariant</code> \u5173\u952E\u5B57\u6765\u663E\u5F0F\u8981\u6C42\u8BA1\u7B97\u7ED3\u679C\u5FC5\u987B\u7CBE\u786E\u4E00\u81F4. \u5F53\u7136\u6211\u4EEC\u4E5F\u53EF\u4F7F\u7528 <code>#pragma STDGL invariant(all)</code>\u6765\u547D\u4EE4\u6240\u6709\u8F93\u51FA\u53D8\u91CF\u5FC5\u987B\u7CBE\u786E\u4E00\u81F4, \u4F46\u8FD9\u6837\u4F1A\u9650\u5236\u7F16\u8BD1\u5668\u4F18\u5316\u7A0B\u5EA6,\u964D\u4F4E\u6027\u80FD.</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">STDGL <span class="token function">invariant</span><span class="token punctuation">(</span>all<span class="token punctuation">)</span> </span><span class="token comment">//\u6240\u6709\u8F93\u51FA\u53D8\u91CF\u4E3A invariant</span></span>
invariant varying texCoord<span class="token punctuation">;</span> <span class="token comment">//varying\u5728\u4F20\u9012\u6570\u636E\u7684\u65F6\u5019\u58F0\u660E\u4E3Ainvariant</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u9650\u5B9A\u7B26\u7684\u987A\u5E8F:</strong></p><p>\u5F53\u9700\u8981\u7528\u5230\u591A\u4E2A\u9650\u5B9A\u7B26\u7684\u65F6\u5019\u8981\u9075\u5FAA\u4EE5\u4E0B\u987A\u5E8F:</p><p>1.\u5728\u4E00\u822C\u53D8\u91CF\u4E2D: invariant &gt; storage &gt; precision</p><p>2.\u5728\u53C2\u6570\u4E2D: storage &gt; parameter &gt; precision</p><p>\u6211\u4EEC\u6765\u4E3E\u4F8B\u8BF4\u660E:</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>invariant varying lowp <span class="token keyword">float</span> color<span class="token punctuation">;</span> <span class="token comment">// invariant &gt; storage &gt; precision</span>

<span class="token keyword">void</span> <span class="token function">doubleSize</span><span class="token punctuation">(</span><span class="token keyword">const</span> in lowp <span class="token keyword">float</span> s<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//storage &gt; parameter &gt; precision</span>
    <span class="token keyword">float</span> s1<span class="token operator">=</span>s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u9884\u7F16\u8BD1\u6307\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u9884\u7F16\u8BD1\u6307\u4EE4" aria-hidden="true">#</a> \u9884\u7F16\u8BD1\u6307\u4EE4:</h3><p>\u4EE5 # \u5F00\u5934\u7684\u662F\u9884\u7F16\u8BD1\u6307\u4EE4,\u5E38\u7528\u7684\u6709:</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">undef</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span></span></span></span></span></span></span></span></span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">error</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">extension</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">version</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">line</span></span></span></span></span></span></span></span></span></span></span></span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6BD4\u5982 <strong>#version 100</strong> \u4ED6\u7684\u610F\u601D\u662F\u89C4\u5B9A\u5F53\u524Dshader\u4F7F\u7528 GLSL ES 1.00\u6807\u51C6\u8FDB\u884C\u7F16\u8BD1,\u5982\u679C\u4F7F\u7528\u8FD9\u6761\u9884\u7F16\u8BD1\u6307\u4EE4,\u5219\u4ED6\u5FC5\u987B\u51FA\u73B0\u5728\u7A0B\u5E8F\u7684\u6700\u5F00\u59CB\u4F4D\u7F6E.</p><p><strong>\u5185\u7F6E\u7684\u5B8F:</strong></p><p><code>__LINE__</code> : \u5F53\u524D\u6E90\u7801\u4E2D\u7684\u884C\u53F7.</p><p><code>__VERSION__</code> : \u4E00\u4E2A\u6574\u6570,\u6307\u793A\u5F53\u524D\u7684glsl\u7248\u672C \u6BD4\u5982 100 ps: 100 = v1.00</p><p><code>GL_ES</code> : \u5982\u679C\u5F53\u524D\u662F\u5728 OPGL ES \u73AF\u5883\u4E2D\u8FD0\u884C\u5219 GL_ES \u88AB\u8BBE\u7F6E\u62101,\u4E00\u822C\u7528\u6765\u68C0\u67E5\u5F53\u524D\u73AF\u5883\u662F\u4E0D\u662F OPENGL ES.</p><p><code>GL_FRAGMENT_PRECISION_HIGH</code> : \u5982\u679C\u5F53\u524D\u7CFB\u7EDFglsl\u7684\u7247\u5143\u7740\u8272\u5668\u652F\u6301\u9AD8\u6D6E\u70B9\u7CBE\u5EA6,\u5219\u8BBE\u7F6E\u4E3A1.\u4E00\u822C\u7528\u4E8E\u68C0\u67E5\u7740\u8272\u5668\u7CBE\u5EA6.</p><p>\u5B9E\u4F8B:</p><p>1.\u5982\u4F55\u901A\u8FC7\u5224\u65AD\u7CFB\u7EDF\u73AF\u5883,\u6765\u9009\u62E9\u5408\u9002\u7684\u7CBE\u5EA6:</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">GL_ES </span><span class="token comment">//</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">GL_FRAGMENT_PRECISION_HIGH</span></span>
precision highp <span class="token keyword">float</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
precision mediump <span class="token keyword">float</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.\u81EA\u5B9A\u4E49\u5B8F:</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUM</span> <span class="token expression"><span class="token number">100</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">NUM<span class="token operator">==</span><span class="token number">100</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5185\u7F6E\u7684\u7279\u6B8A\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#\u5185\u7F6E\u7684\u7279\u6B8A\u53D8\u91CF" aria-hidden="true">#</a> \u5185\u7F6E\u7684\u7279\u6B8A\u53D8\u91CF</h3><p>glsl\u7A0B\u5E8F\u4F7F\u7528\u4E00\u4E9B\u7279\u6B8A\u7684\u5185\u7F6E\u53D8\u91CF\u4E0E\u786C\u4EF6\u8FDB\u884C\u6C9F\u901A.\u4ED6\u4EEC\u5927\u81F4\u5206\u6210\u4E24\u79CD \u4E00\u79CD\u662F <code>input</code>\u7C7B\u578B,\u4ED6\u8D1F\u8D23\u5411\u786C\u4EF6(\u6E32\u67D3\u7BA1\u7EBF)\u53D1\u9001\u6570\u636E. \u53E6\u4E00\u79CD\u662F<code>output</code>\u7C7B\u578B,\u8D1F\u8D23\u5411\u7A0B\u5E8F\u56DE\u4F20\u6570\u636E,\u4EE5\u4FBF\u7F16\u7A0B\u65F6\u9700\u8981.</p><p><strong>\u5728 vertex Shader \u4E2D:</strong></p><p>output \u7C7B\u578B\u7684\u5185\u7F6E\u53D8\u91CF:</p><table><thead><tr><th>\u53D8\u91CF</th><th>\u8BF4\u660E</th><th>\u5355\u4F4D</th></tr></thead><tbody><tr><td>highp vec4 <code>gl_Position</code>;</td><td>gl_Position \u653E\u7F6E\u9876\u70B9\u5750\u6807\u4FE1\u606F</td><td>vec4</td></tr><tr><td>mediump float <code>gl_PointSize</code>;</td><td>gl_PointSize \u9700\u8981\u7ED8\u5236\u70B9\u7684\u5927\u5C0F,(\u53EA\u5728gl.POINTS\u6A21\u5F0F\u4E0B\u6709\u6548)</td><td>float</td></tr></tbody></table><p><strong>\u5728 fragment Shader \u4E2D:</strong></p><p>input \u7C7B\u578B\u7684\u5185\u7F6E\u53D8\u91CF:</p><table><thead><tr><th>\u53D8\u91CF</th><th>\u8BF4\u660E</th><th>\u5355\u4F4D</th></tr></thead><tbody><tr><td>mediump vec4 <code>gl_FragCoord</code>;</td><td>\u7247\u5143\u5728framebuffer\u753B\u9762\u7684\u76F8\u5BF9\u4F4D\u7F6E</td><td>vec4</td></tr><tr><td>bool <code>gl_FrontFacing</code>;</td><td>\u6807\u5FD7\u5F53\u524D\u56FE\u5143\u662F\u4E0D\u662F\u6B63\u9762\u56FE\u5143\u7684\u4E00\u90E8\u5206</td><td>bool</td></tr><tr><td>mediump vec2 <code>gl_PointCoord</code>;</td><td>\u7ECF\u8FC7\u63D2\u503C\u8BA1\u7B97\u540E\u7684\u7EB9\u7406\u5750\u6807,\u70B9\u7684\u8303\u56F4\u662F0.0\u52301.0</td><td>vec2</td></tr></tbody></table><p>output \u7C7B\u578B\u7684\u5185\u7F6E\u53D8\u91CF:</p><table><thead><tr><th>\u53D8\u91CF</th><th>\u8BF4\u660E</th><th>\u5355\u4F4D</th></tr></thead><tbody><tr><td>mediump vec4 <code>gl_FragColor</code>;</td><td>\u8BBE\u7F6E\u5F53\u524D\u7247\u70B9\u7684\u989C\u8272</td><td>vec4 RGBA color</td></tr><tr><td>mediump vec4 <code>gl_FragData[n]</code></td><td>\u8BBE\u7F6E\u5F53\u524D\u7247\u70B9\u7684\u989C\u8272,\u4F7F\u7528glDrawBuffers\u6570\u636E\u6570\u7EC4</td><td>vec4 RGBA color</td></tr></tbody></table><h3 id="\u5185\u7F6E\u7684\u5E38\u91CF" tabindex="-1"><a class="header-anchor" href="#\u5185\u7F6E\u7684\u5E38\u91CF" aria-hidden="true">#</a> \u5185\u7F6E\u7684\u5E38\u91CF</h3><p>glsl\u63D0\u4F9B\u4E86\u4E00\u4E9B\u5185\u7F6E\u7684\u5E38\u91CF,\u7528\u6765\u8BF4\u660E\u5F53\u524D\u7CFB\u7EDF\u7684\u4E00\u4E9B\u7279\u6027. \u6709\u65F6\u6211\u4EEC\u9700\u8981\u9488\u5BF9\u8FD9\u4E9B\u7279\u6027,\u5BF9shader\u7A0B\u5E8F\u8FDB\u884C\u4F18\u5316,\u8BA9\u7A0B\u5E8F\u517C\u5BB9\u5EA6\u66F4\u597D.</p><p><strong>\u5728 vertex Shader \u4E2D:</strong></p><p>1.const mediump int <code>gl_MaxVertexAttribs</code>&gt;=8</p><p>gl_MaxVertexAttribs \u8868\u793A\u5728vertex shader(\u9876\u70B9\u7740\u8272\u5668)\u4E2D\u53EF\u7528\u7684\u6700\u5927attributes\u6570.\u8FD9\u4E2A\u503C\u7684\u5927\u5C0F\u53D6\u51B3\u4E8E OpenGL ES \u5728\u67D0\u8BBE\u5907\u4E0A\u7684\u5177\u4F53\u5B9E\u73B0, \u4E0D\u8FC7\u6700\u4F4E\u4E0D\u80FD\u5C0F\u4E8E 8 \u4E2A.</p><p>2.const mediump int <code>gl_MaxVertexUniformVectors</code> &gt;= 128</p><p>gl_MaxVertexUniformVectors \u8868\u793A\u5728vertex shader(\u9876\u70B9\u7740\u8272\u5668)\u4E2D\u53EF\u7528\u7684\u6700\u5927uniform vectors\u6570. \u8FD9\u4E2A\u503C\u7684\u5927\u5C0F\u53D6\u51B3\u4E8E OpenGL ES \u5728\u67D0\u8BBE\u5907\u4E0A\u7684\u5177\u4F53\u5B9E\u73B0, \u4E0D\u8FC7\u6700\u4F4E\u4E0D\u80FD\u5C0F\u4E8E 128 \u4E2A.</p><p>3.const mediump int <code>gl_MaxVaryingVectors</code> &gt;= 8</p><p>gl_MaxVaryingVectors \u8868\u793A\u5728vertex shader(\u9876\u70B9\u7740\u8272\u5668)\u4E2D\u53EF\u7528\u7684\u6700\u5927varying vectors\u6570. \u8FD9\u4E2A\u503C\u7684\u5927\u5C0F\u53D6\u51B3\u4E8E OpenGL ES \u5728\u67D0\u8BBE\u5907\u4E0A\u7684\u5177\u4F53\u5B9E\u73B0, \u4E0D\u8FC7\u6700\u4F4E\u4E0D\u80FD\u5C0F\u4E8E 8 \u4E2A.</p><p>4.const mediump int <code>gl_MaxVertexTextureImageUnits</code> &gt;= 0</p><p>gl_MaxVaryingVectors \u8868\u793A\u5728vertex shader(\u9876\u70B9\u7740\u8272\u5668)\u4E2D\u53EF\u7528\u7684\u6700\u5927\u7EB9\u7406\u5355\u5143\u6570(\u8D34\u56FE). \u8FD9\u4E2A\u503C\u7684\u5927\u5C0F\u53D6\u51B3\u4E8E OpenGL ES \u5728\u67D0\u8BBE\u5907\u4E0A\u7684\u5177\u4F53\u5B9E\u73B0, \u751A\u81F3\u53EF\u4EE5\u4E00\u4E2A\u90FD\u6CA1\u6709(\u65E0\u6CD5\u83B7\u53D6\u9876\u70B9\u7EB9\u7406)</p><p>5.const mediump int <code>gl_MaxCombinedTextureImageUnits</code> &gt;= 8</p><p>gl_MaxVaryingVectors \u8868\u793A\u5728 vertex Shader\u548Cfragment Shader\u603B\u5171\u6700\u591A\u652F\u6301\u591A\u5C11\u4E2A\u7EB9\u7406\u5355\u5143. \u8FD9\u4E2A\u503C\u7684\u5927\u5C0F\u53D6\u51B3\u4E8E OpenGL ES \u5728\u67D0\u8BBE\u5907\u4E0A\u7684\u5177\u4F53\u5B9E\u73B0, \u4E0D\u8FC7\u6700\u4F4E\u4E0D\u80FD\u5C0F\u4E8E 8 \u4E2A.</p><p><strong>\u5728 fragment Shader \u4E2D:</strong></p><p>1.const mediump int <code>gl_MaxTextureImageUnits</code> &gt;= 8</p><p>gl_MaxVaryingVectors \u8868\u793A\u5728 fragment Shader(\u7247\u5143\u7740\u8272\u5668)\u4E2D\u80FD\u8BBF\u95EE\u7684\u6700\u5927\u7EB9\u7406\u5355\u5143\u6570,\u8FD9\u4E2A\u503C\u7684\u5927\u5C0F\u53D6\u51B3\u4E8E OpenGL ES \u5728\u67D0\u8BBE\u5907\u4E0A\u7684\u5177\u4F53\u5B9E\u73B0, \u4E0D\u8FC7\u6700\u4F4E\u4E0D\u80FD\u5C0F\u4E8E 8 \u4E2A.</p><p>2.const mediump int <code>gl_MaxFragmentUniformVectors</code> &gt;= 16</p><p>gl_MaxFragmentUniformVectors \u8868\u793A\u5728 fragment Shader(\u7247\u5143\u7740\u8272\u5668)\u4E2D\u53EF\u7528\u7684\u6700\u5927uniform vectors\u6570,\u8FD9\u4E2A\u503C\u7684\u5927\u5C0F\u53D6\u51B3\u4E8E OpenGL ES \u5728\u67D0\u8BBE\u5907\u4E0A\u7684\u5177\u4F53\u5B9E\u73B0, \u4E0D\u8FC7\u6700\u4F4E\u4E0D\u80FD\u5C0F\u4E8E 16 \u4E2A.</p><p>3.const mediump int <code>gl_MaxDrawBuffers</code> = 1</p><p>gl_MaxDrawBuffers \u8868\u793A\u53EF\u7528\u7684drawBuffers\u6570,\u5728OpenGL ES 2.0\u4E2D\u8FD9\u4E2A\u503C\u4E3A1, \u5728\u5C06\u6765\u7684\u7248\u672C\u53EF\u80FD\u4F1A\u6709\u6240\u53D8\u5316.</p><p>glsl\u4E2D\u8FD8\u6709\u4E00\u79CD\u5185\u7F6E\u7684uniform\u72B6\u6001\u53D8\u91CF, <code>gl_DepthRange</code> \u5B83\u7528\u6765\u8868\u660E\u5168\u5C40\u6DF1\u5EA6\u8303\u56F4.</p><p>\u7ED3\u6784\u5982\u4E0B:</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">struct</span> <span class="token class-name">gl_DepthRangeParameters</span> <span class="token punctuation">{</span>
 highp <span class="token keyword">float</span> near<span class="token punctuation">;</span> <span class="token comment">// n</span>
 highp <span class="token keyword">float</span> far<span class="token punctuation">;</span> <span class="token comment">// f</span>
 highp <span class="token keyword">float</span> diff<span class="token punctuation">;</span> <span class="token comment">// f - n</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 uniform gl_DepthRangeParameters gl_DepthRange<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9664\u4E86 gl_DepthRange \u5916\u7684\u6240\u6709uniform\u72B6\u6001\u5E38\u91CF\u90FD\u5DF2\u5728glsl 1.30 \u4E2D<code>\u5E9F\u5F03</code>.</p><h3 id="\u6D41\u63A7\u5236" tabindex="-1"><a class="header-anchor" href="#\u6D41\u63A7\u5236" aria-hidden="true">#</a> \u6D41\u63A7\u5236</h3><p>glsl\u7684\u6D41\u63A7\u5236\u548Cc\u8BED\u8A00\u975E\u5E38\u76F8\u4F3C,\u8FD9\u91CC\u4E0D\u5FC5\u518D\u505A\u8FC7\u591A\u8BF4\u660E,\u552F\u4E00\u4E0D\u540C\u7684\u662F\u7247\u6BB5\u7740\u8272\u5668\u4E2D\u6709\u4E00\u79CD\u7279\u6B8A\u7684\u63A7\u5236\u6D41<code>discard</code>. \u4F7F\u7528discard\u4F1A\u9000\u51FA\u7247\u6BB5\u7740\u8272\u5668\uFF0C\u4E0D\u6267\u884C\u540E\u9762\u7684\u7247\u6BB5\u7740\u8272\u64CD\u4F5C\u3002\u7247\u6BB5\u4E5F\u4E0D\u4F1A\u5199\u5165\u5E27\u7F13\u51B2\u533A\u3002</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span>l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> l <span class="token operator">&lt;</span> numLights<span class="token punctuation">;</span> l<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lightExists<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
    color <span class="token operator">+=</span> light<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> num<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> color<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    i<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">do</span><span class="token punctuation">{</span>
    color <span class="token operator">+=</span> light<span class="token punctuation">[</span>lightNum<span class="token punctuation">]</span><span class="token punctuation">;</span>
    lightNum<span class="token operator">--</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">while</span> <span class="token punctuation">(</span>lightNum <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>


<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    discard<span class="token punctuation">;</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5185\u7F6E\u51FD\u6570\u5E93" tabindex="-1"><a class="header-anchor" href="#\u5185\u7F6E\u51FD\u6570\u5E93" aria-hidden="true">#</a> \u5185\u7F6E\u51FD\u6570\u5E93</h3><p>glsl\u63D0\u4F9B\u4E86\u975E\u5E38\u4E30\u5BCC\u7684\u51FD\u6570\u5E93,\u4F9B\u6211\u4EEC\u4F7F\u7528,\u8FD9\u4E9B\u529F\u80FD\u90FD\u662F\u975E\u5E38\u6709\u7528\u4E14\u4F1A\u7ECF\u5E38\u7528\u5230\u7684. \u8FD9\u4E9B\u51FD\u6570\u6309\u529F\u80FD\u533A\u5206\u5927\u6539\u53EF\u4EE5\u5206\u62107\u7C7B:</p><p><strong>\u901A\u7528\u51FD\u6570:</strong></p><p>\u4E0B\u6587\u4E2D\u7684 \u7C7B\u578B T\u53EF\u4EE5\u662F float, vec2, vec3, vec4,\u4E14\u53EF\u4EE5\u9010\u5206\u91CF\u64CD\u4F5C.</p><table><thead><tr><th>\u65B9\u6CD5</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>T abs(T x)</td><td>\u8FD4\u56DEx\u7684\u7EDD\u5BF9\u503C</td></tr><tr><td>T sign(T x)</td><td>\u6BD4\u8F83x\u4E0E0\u7684\u503C,\u5927\u4E8E,\u7B49\u4E8E,\u5C0F\u4E8E \u5206\u522B\u8FD4\u56DE 1.0 ,0.0,-1.0</td></tr><tr><td>T floor(T x)</td><td>\u8FD4\u56DE&lt;=x\u7684\u6700\u5927\u6574\u6570</td></tr><tr><td>T ceil(T x)</td><td>\u8FD4\u56DE&gt;=\u7B49\u4E8Ex\u7684\u6700\u5C0F\u6574\u6570</td></tr><tr><td>T fract(T x)</td><td>\u83B7\u53D6x\u7684\u5C0F\u6570\u90E8\u5206</td></tr><tr><td>T mod(T x, T y) <br> T mod(T x, float y)</td><td>\u53D6x,y\u7684\u4F59\u6570</td></tr><tr><td>T min(T x, T y) <br> T min(T x, float y)</td><td>\u53D6x,y\u7684\u6700\u5C0F\u503C</td></tr><tr><td>T max(T x, T y) <br> T max(T x, float y)</td><td>\u53D6x,y\u7684\u6700\u5927\u503C</td></tr><tr><td>T clamp(T x, T minVal, T maxVal) <br>T clamp(T x, float minVal,float maxVal)</td><td>min(max(x, minVal), maxVal),\u8FD4\u56DE\u503C\u88AB\u9650\u5B9A\u5728 minVal,maxVal\u4E4B\u95F4</td></tr><tr><td>T mix(T x, T y, T a) <br> T mix(T x, T y, float a)</td><td>\u53D6x,y\u7684\u7EBF\u6027\u6DF7\u5408,x*(1-a)+y*a</td></tr><tr><td>T step(T edge, T x) <br> T step(float edge, T x)</td><td>\u5982\u679C x&lt;edge \u8FD4\u56DE 0.0 \u5426\u5219\u8FD4\u56DE1.0</td></tr><tr><td>T smoothstep(T edge0, T edge1, T x) <br> T smoothstep(float edge0,float edge1, T x)</td><td>\u5982\u679Cx&lt;edge0 \u8FD4\u56DE 0.0 \u5982\u679Cx&gt;edge1\u8FD4\u56DE1.0, \u5426\u5219\u8FD4\u56DEHermite\u63D2\u503C</td></tr></tbody></table><p><strong>\u89D2\u5EA6&amp;\u4E09\u89D2\u51FD\u6570:</strong></p><p>\u4E0B\u6587\u4E2D\u7684 \u7C7B\u578B T\u53EF\u4EE5\u662F float, vec2, vec3, vec4,\u4E14\u53EF\u4EE5\u9010\u5206\u91CF\u64CD\u4F5C.</p><table><thead><tr><th>\u65B9\u6CD5</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>T radians(T degrees)</td><td>\u89D2\u5EA6\u8F6C\u5F27\u5EA6</td></tr><tr><td>T degrees(T radians)</td><td>\u5F27\u5EA6\u8F6C\u89D2\u5EA6</td></tr><tr><td>T sin(T angle)</td><td>\u6B63\u5F26\u51FD\u6570,\u89D2\u5EA6\u662F\u5F27\u5EA6</td></tr><tr><td>T cos(T angle)</td><td>\u4F59\u5F26\u51FD\u6570,\u89D2\u5EA6\u662F\u5F27\u5EA6</td></tr><tr><td>T tan(T angle)</td><td>\u6B63\u5207\u51FD\u6570,\u89D2\u5EA6\u662F\u5F27\u5EA6</td></tr><tr><td>T asin(T x)</td><td>\u53CD\u6B63\u5F26\u51FD\u6570,\u8FD4\u56DE\u503C\u662F\u5F27\u5EA6</td></tr><tr><td>T acos(T x)</td><td>\u53CD\u4F59\u5F26\u51FD\u6570,\u8FD4\u56DE\u503C\u662F\u5F27\u5EA6</td></tr><tr><td>T atan(T y, T x)<br> T atan(T y_over_x)</td><td>\u53CD\u6B63\u5207\u51FD\u6570,\u8FD4\u56DE\u503C\u662F\u5F27\u5EA6</td></tr></tbody></table><p><strong>\u6307\u6570\u51FD\u6570:</strong></p><p>\u4E0B\u6587\u4E2D\u7684 \u7C7B\u578B T\u53EF\u4EE5\u662F float, vec2, vec3, vec4,\u4E14\u53EF\u4EE5\u9010\u5206\u91CF\u64CD\u4F5C.</p><table><thead><tr><th>\u65B9\u6CD5</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>T pow(T x, T y)</td><td>\u8FD4\u56DEx\u7684y\u6B21\u5E42 x<sub>y</sub></td></tr><tr><td>T exp(T x)</td><td>\u8FD4\u56DEx\u7684\u81EA\u7136\u6307\u6570\u5E42 e<sub>x</sub></td></tr><tr><td>T log(T x)</td><td>\u8FD4\u56DEx\u7684\u81EA\u7136\u5BF9\u6570 ln</td></tr><tr><td>T exp2(T x)</td><td>\u8FD4\u56DE2\u7684x\u6B21\u5E42 2<sub>x</sub></td></tr><tr><td>T log2(T x)</td><td>\u8FD4\u56DE2\u4E3A\u5E95\u7684\u5BF9\u6570 log2</td></tr><tr><td>T sqrt(T x)</td><td>\u5F00\u6839\u53F7 \u221Ax</td></tr><tr><td>T inversesqrt(T x)</td><td>\u5148\u5F00\u6839\u53F7,\u5728\u53D6\u5012\u6570,\u5C31\u662F 1/\u221Ax</td></tr></tbody></table><p><strong>\u51E0\u4F55\u51FD\u6570:</strong></p><p>\u4E0B\u6587\u4E2D\u7684 \u7C7B\u578B T\u53EF\u4EE5\u662F float, vec2, vec3, vec4,\u4E14\u53EF\u4EE5\u9010\u5206\u91CF\u64CD\u4F5C.</p><table><thead><tr><th>\u65B9\u6CD5</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>float length(T x)</td><td>\u8FD4\u56DE\u77E2\u91CFx\u7684\u957F\u5EA6</td></tr><tr><td>float distance(T p0, T p1)</td><td>\u8FD4\u56DEp0 p1\u4E24\u70B9\u7684\u8DDD\u79BB</td></tr><tr><td>float dot(T x, T y)</td><td>\u8FD4\u56DEx y\u7684\u70B9\u79EF</td></tr><tr><td>vec3 cross(vec3 x, vec3 y)</td><td>\u8FD4\u56DEx y\u7684\u53C9\u79EF</td></tr><tr><td>T normalize(T x)</td><td>\u5BF9x\u8FDB\u884C\u5F52\u4E00\u5316,\u4FDD\u6301\u5411\u91CF\u65B9\u5411\u4E0D\u53D8\u4F46\u957F\u5EA6\u53D8\u4E3A1</td></tr><tr><td>T faceforward(T N, T I, T Nref)</td><td>\u6839\u636E \u77E2\u91CF N \u4E0ENref \u8C03\u6574\u6CD5\u5411\u91CF</td></tr><tr><td>T reflect(T I, T N)</td><td>\u8FD4\u56DE I - 2 * dot(N,I) * N, \u7ED3\u679C\u662F\u5165\u5C04\u77E2\u91CF I \u5173\u4E8E\u6CD5\u5411\u91CFN\u7684 \u955C\u9762\u53CD\u5C04\u77E2\u91CF</td></tr><tr><td>T refract(T I, T N, float eta)</td><td>\u8FD4\u56DE\u5165\u5C04\u77E2\u91CFI\u5173\u4E8E\u6CD5\u5411\u91CFN\u7684\u6298\u5C04\u77E2\u91CF,\u6298\u5C04\u7387\u4E3Aeta</td></tr></tbody></table><p><strong>\u77E9\u9635\u51FD\u6570:</strong></p><p>mat\u53EF\u4EE5\u4E3A\u4EFB\u610F\u7C7B\u578B\u77E9\u9635.</p><table><thead><tr><th>\u65B9\u6CD5</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>mat matrixCompMult(mat x, mat y)</td><td>\u5C06\u77E9\u9635 x \u548C y\u7684\u5143\u7D20\u9010\u5206\u91CF\u76F8\u4E58</td></tr></tbody></table><p><strong>\u5411\u91CF\u51FD\u6570:</strong></p><p>\u4E0B\u6587\u4E2D\u7684 \u7C7B\u578B T\u53EF\u4EE5\u662F vec2, vec3, vec4, \u4E14\u53EF\u4EE5\u9010\u5206\u91CF\u64CD\u4F5C.</p><p>bvec\u6307\u7684\u662F\u7531bool\u7C7B\u578B\u7EC4\u6210\u7684\u4E00\u4E2A\u5411\u91CF:</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>vec3 v3<span class="token operator">=</span> <span class="token function">vec3</span><span class="token punctuation">(</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vec3 v3_1<span class="token operator">=</span> <span class="token function">vec3</span><span class="token punctuation">(</span><span class="token number">1.</span><span class="token punctuation">,</span><span class="token number">1.</span><span class="token punctuation">,</span><span class="token number">1.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bvec3 aa<span class="token operator">=</span> <span class="token function">lessThan</span><span class="token punctuation">(</span>v3<span class="token punctuation">,</span>v3_1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//bvec3(true,true,true)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>\u65B9\u6CD5</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>bvec lessThan(T x, T y)</td><td>\u9010\u5206\u91CF\u6BD4\u8F83x &lt; y,\u5C06\u7ED3\u679C\u5199\u5165bvec\u5BF9\u5E94\u4F4D\u7F6E</td></tr><tr><td>bvec lessThanEqual(T x, T y)</td><td>\u9010\u5206\u91CF\u6BD4\u8F83 x &lt;= y,\u5C06\u7ED3\u679C\u5199\u5165bvec\u5BF9\u5E94\u4F4D\u7F6E</td></tr><tr><td>bvec greaterThan(T x, T y)</td><td>\u9010\u5206\u91CF\u6BD4\u8F83 x &gt; y,\u5C06\u7ED3\u679C\u5199\u5165bvec\u5BF9\u5E94\u4F4D\u7F6E</td></tr><tr><td>bvec greaterThanEqual(T x, T y)</td><td>\u9010\u5206\u91CF\u6BD4\u8F83 x &gt;= y,\u5C06\u7ED3\u679C\u5199\u5165bvec\u5BF9\u5E94\u4F4D\u7F6E</td></tr><tr><td>bvec equal(T x, T y) <br> bvec equal(bvec x, bvec y)</td><td>\u9010\u5206\u91CF\u6BD4\u8F83 x == y,\u5C06\u7ED3\u679C\u5199\u5165bvec\u5BF9\u5E94\u4F4D\u7F6E</td></tr><tr><td>bvec notEqual(T x, T y) <br> bvec notEqual(bvec x, bvec y)</td><td>\u9010\u5206\u91CF\u6BD4\u8F83 x!= y,\u5C06\u7ED3\u679C\u5199\u5165bvec\u5BF9\u5E94\u4F4D\u7F6E</td></tr><tr><td>bool any(bvec x)</td><td>\u5982\u679Cx\u7684\u4EFB\u610F\u4E00\u4E2A\u5206\u91CF\u662Ftrue,\u5219\u7ED3\u679C\u4E3Atrue</td></tr><tr><td>bool all(bvec x)</td><td>\u5982\u679Cx\u7684\u6240\u6709\u5206\u91CF\u662Ftrue,\u5219\u7ED3\u679C\u4E3Atrue</td></tr><tr><td>bvec not(bvec x)</td><td>bool\u77E2\u91CF\u7684\u9010\u5206\u91CF\u53D6\u53CD</td></tr></tbody></table><p><strong>\u7EB9\u7406\u67E5\u8BE2\u51FD\u6570:</strong></p><p>\u56FE\u50CF\u7EB9\u7406\u6709\u4E24\u79CD \u4E00\u79CD\u662F\u5E73\u97622d\u7EB9\u7406,\u53E6\u4E00\u79CD\u662F\u76D2\u7EB9\u7406,\u9488\u5BF9\u4E0D\u540C\u7684\u7EB9\u7406\u7C7B\u578B\u6709\u4E0D\u540C\u8BBF\u95EE\u65B9\u6CD5.</p><p>\u7EB9\u7406\u67E5\u8BE2\u7684\u6700\u7EC8\u76EE\u7684\u662F\u4ECEsampler\u4E2D\u63D0\u53D6\u6307\u5B9A\u5750\u6807\u7684\u989C\u8272\u4FE1\u606F. \u51FD\u6570\u4E2D\u5E26\u6709Cube\u5B57\u6837\u7684\u662F\u6307 \u9700\u8981\u4F20\u5165\u76D2\u72B6\u7EB9\u7406. \u5E26\u6709Proj\u5B57\u6837\u7684\u662F\u6307\u5E26\u6295\u5F71\u7684\u7248\u672C.</p><p>\u4EE5\u4E0B\u51FD\u6570\u53EA\u5728vertex shader\u4E2D\u53EF\u7528:</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>vec4 <span class="token function">texture2DLod</span><span class="token punctuation">(</span>sampler2D sampler<span class="token punctuation">,</span> vec2 coord<span class="token punctuation">,</span> <span class="token keyword">float</span> lod<span class="token punctuation">)</span><span class="token punctuation">;</span>
vec4 <span class="token function">texture2DProjLod</span><span class="token punctuation">(</span>sampler2D sampler<span class="token punctuation">,</span> vec3 coord<span class="token punctuation">,</span> <span class="token keyword">float</span> lod<span class="token punctuation">)</span><span class="token punctuation">;</span>
vec4 <span class="token function">texture2DProjLod</span><span class="token punctuation">(</span>sampler2D sampler<span class="token punctuation">,</span> vec4 coord<span class="token punctuation">,</span> <span class="token keyword">float</span> lod<span class="token punctuation">)</span><span class="token punctuation">;</span>
vec4 <span class="token function">textureCubeLod</span><span class="token punctuation">(</span>samplerCube sampler<span class="token punctuation">,</span> vec3 coord<span class="token punctuation">,</span> <span class="token keyword">float</span> lod<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0B\u51FD\u6570\u53EA\u5728fragment shader\u4E2D\u53EF\u7528:</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>vec4 <span class="token function">texture2D</span><span class="token punctuation">(</span>sampler2D sampler<span class="token punctuation">,</span> vec2 coord<span class="token punctuation">,</span> <span class="token keyword">float</span> bias<span class="token punctuation">)</span><span class="token punctuation">;</span>
vec4 <span class="token function">texture2DProj</span><span class="token punctuation">(</span>sampler2D sampler<span class="token punctuation">,</span> vec3 coord<span class="token punctuation">,</span> <span class="token keyword">float</span> bias<span class="token punctuation">)</span><span class="token punctuation">;</span>
vec4 <span class="token function">texture2DProj</span><span class="token punctuation">(</span>sampler2D sampler<span class="token punctuation">,</span> vec4 coord<span class="token punctuation">,</span> <span class="token keyword">float</span> bias<span class="token punctuation">)</span><span class="token punctuation">;</span>
vec4 <span class="token function">textureCube</span><span class="token punctuation">(</span>samplerCube sampler<span class="token punctuation">,</span> vec3 coord<span class="token punctuation">,</span> <span class="token keyword">float</span> bias<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728 vertex shader \u4E0E fragment shader \u4E2D\u90FD\u53EF\u7528:</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>vec4 <span class="token function">texture2D</span><span class="token punctuation">(</span>sampler2D sampler<span class="token punctuation">,</span> vec2 coord<span class="token punctuation">)</span><span class="token punctuation">;</span>
vec4 <span class="token function">texture2DProj</span><span class="token punctuation">(</span>sampler2D sampler<span class="token punctuation">,</span> vec3 coord<span class="token punctuation">)</span><span class="token punctuation">;</span>
vec4 <span class="token function">texture2DProj</span><span class="token punctuation">(</span>sampler2D sampler<span class="token punctuation">,</span> vec4 coord<span class="token punctuation">)</span><span class="token punctuation">;</span>
vec4 <span class="token function">textureCube</span><span class="token punctuation">(</span>samplerCube sampler<span class="token punctuation">,</span> vec3 coord<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5B98\u65B9\u7684shader\u8303\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u5B98\u65B9\u7684shader\u8303\u4F8B" aria-hidden="true">#</a> \u5B98\u65B9\u7684shader\u8303\u4F8B:</h3><p>\u4E0B\u9762\u7684shader\u5982\u679C\u4F60\u53EF\u4EE5\u4E00\u773C\u770B\u61C2,\u8BF4\u660E\u4F60\u5DF2\u7ECF\u5BF9glsl\u8BED\u8A00\u57FA\u672C\u638C\u63E1\u4E86.</p><p><strong>Vertex Shader:</strong></p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>uniform mat4 mvp_matrix<span class="token punctuation">;</span> <span class="token comment">//\u900F\u89C6\u77E9\u9635 * \u89C6\u56FE\u77E9\u9635 * \u6A21\u578B\u53D8\u6362\u77E9\u9635</span>
uniform mat3 normal_matrix<span class="token punctuation">;</span> <span class="token comment">//\u6CD5\u7EBF\u53D8\u6362\u77E9\u9635(\u7528\u4E8E\u7269\u4F53\u53D8\u6362\u540E\u6CD5\u7EBF\u8DDF\u7740\u53D8\u6362)</span>
uniform vec3 ec_light_dir<span class="token punctuation">;</span> <span class="token comment">//\u5149\u7167\u65B9\u5411</span>
attribute vec4 a_vertex<span class="token punctuation">;</span> <span class="token comment">// \u9876\u70B9\u5750\u6807</span>
attribute vec3 a_normal<span class="token punctuation">;</span> <span class="token comment">//\u9876\u70B9\u6CD5\u7EBF</span>
attribute vec2 a_texcoord<span class="token punctuation">;</span> <span class="token comment">//\u7EB9\u7406\u5750\u6807</span>
varying <span class="token keyword">float</span> v_diffuse<span class="token punctuation">;</span> <span class="token comment">//\u6CD5\u7EBF\u4E0E\u5165\u5C04\u5149\u7684\u5939\u89D2</span>
varying vec2 v_texcoord<span class="token punctuation">;</span> <span class="token comment">//2d\u7EB9\u7406\u5750\u6807</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
 <span class="token comment">//\u5F52\u4E00\u5316\u6CD5\u7EBF</span>
 vec3 ec_normal <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span>normal_matrix <span class="token operator">*</span> a_normal<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">//v_diffuse \u662F\u6CD5\u7EBF\u4E0E\u5149\u7167\u7684\u5939\u89D2.\u6839\u636E\u5411\u91CF\u70B9\u4E58\u6CD5\u5219,\u5F53\u4E24\u5411\u91CF\u957F\u5EA6\u4E3A1\u662F \u4E58\u79EF\u5373cos\u03B8\u503C</span>
 v_diffuse <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>ec_light_dir<span class="token punctuation">,</span> ec_normal<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 v_texcoord <span class="token operator">=</span> a_texcoord<span class="token punctuation">;</span>
 gl_Position <span class="token operator">=</span> mvp_matrix <span class="token operator">*</span> a_vertex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Fragment Shader:</strong></p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>precision mediump <span class="token keyword">float</span><span class="token punctuation">;</span>
uniform sampler2D t_reflectance<span class="token punctuation">;</span>
uniform vec4 i_ambient<span class="token punctuation">;</span>
varying <span class="token keyword">float</span> v_diffuse<span class="token punctuation">;</span>
varying vec2 v_texcoord<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
 vec4 color <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>t_reflectance<span class="token punctuation">,</span> v_texcoord<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">//\u8FD9\u91CC\u5206\u89E3\u5F00\u6765\u662F color*vec3(1,1,1)*v_diffuse + color*i_ambient</span>
 <span class="token comment">//\u8272*\u5149*\u5939\u89D2cos + \u8272*\u73AF\u5883\u5149</span>
 gl_FragColor <span class="token operator">=</span> color<span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">vec4</span><span class="token punctuation">(</span>v_diffuse<span class="token punctuation">)</span> <span class="token operator">+</span> i_ambient<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,185)]))}var i=s(p,[["render",o],["__file","glsl.html.vue"]]);export{i as default};
//# sourceMappingURL=glsl.html.cf1c4f2a.js.map
